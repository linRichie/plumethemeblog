import{_ as p,c as t,a,b as h,d as n,w as e,r as d,o as r,e as l}from"./app-BVpc6fz1.js";const c={},k={class:"table-of-contents"};function o(u,s){const i=d("router-link");return r(),t("div",null,[a("nav",k,[a("ul",null,[a("li",null,[n(i,{to:"#简介"},{default:e(()=>s[0]||(s[0]=[l("简介")])),_:1})]),a("li",null,[n(i,{to:"#_1-安装部署"},{default:e(()=>s[1]||(s[1]=[l("1. 安装部署")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#_1-1-环境要求"},{default:e(()=>s[2]||(s[2]=[l("1.1 环境要求")])),_:1})]),a("li",null,[n(i,{to:"#_1-2-启动容器"},{default:e(()=>s[3]||(s[3]=[l("1.2 启动容器")])),_:1})])])]),a("li",null,[n(i,{to:"#_2-初始配置"},{default:e(()=>s[4]||(s[4]=[l("2. 初始配置")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#_2-1-访问管理界面"},{default:e(()=>s[5]||(s[5]=[l("2.1 访问管理界面")])),_:1})]),a("li",null,[n(i,{to:"#_2-2-创建-docker-仓库"},{default:e(()=>s[6]||(s[6]=[l("2.2 创建 Docker 仓库")])),_:1})])])]),a("li",null,[n(i,{to:"#_3-配置-docker-客户端"},{default:e(()=>s[7]||(s[7]=[l("3. 配置 Docker 客户端")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#_3-1-配置-docker-信任"},{default:e(()=>s[8]||(s[8]=[l("3.1 配置 Docker 信任")])),_:1})]),a("li",null,[n(i,{to:"#_3-2-推送镜像示例"},{default:e(()=>s[9]||(s[9]=[l("3.2 推送镜像示例")])),_:1})])])]),a("li",null,[n(i,{to:"#_4-维护管理"},{default:e(()=>s[10]||(s[10]=[l("4. 维护管理")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#_4-1-备份"},{default:e(()=>s[11]||(s[11]=[l("4.1 备份")])),_:1})]),a("li",null,[n(i,{to:"#_4-2-清理"},{default:e(()=>s[12]||(s[12]=[l("4.2 清理")])),_:1})])])]),a("li",null,[n(i,{to:"#_5-最佳实践"},{default:e(()=>s[13]||(s[13]=[l("5. 最佳实践")])),_:1})])])]),s[14]||(s[14]=h(`<hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Nexus 是一个强大的仓库管理器，可以用来管理多种类型的仓库，包括：</p><ul><li>Docker 镜像仓库</li><li>Maven 包仓库</li><li>npm 包仓库</li><li>PyPI 包仓库</li><li>Yum/APT 软件源</li></ul><p>相比官方的 Docker Registry，Nexus 具有以下优势：</p><ul><li>支持自动垃圾回收</li><li>提供友好的 Web 界面</li><li>支持多种认证方式</li><li>可以管理多种类型的仓库</li></ul><h2 id="_1-安装部署" tabindex="-1"><a class="header-anchor" href="#_1-安装部署"><span>1. 安装部署</span></a></h2><h3 id="_1-1-环境要求" tabindex="-1"><a class="header-anchor" href="#_1-1-环境要求"><span>1.1 环境要求</span></a></h3><ul><li>Docker 版本 &gt;= 17.06</li><li>至少 4GB 内存</li><li>至少 20GB 磁盘空间</li></ul><h3 id="_1-2-启动容器" tabindex="-1"><a class="header-anchor" href="#_1-2-启动容器"><span>1.2 启动容器</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">创建数据卷</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">volume</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">create</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nexus-data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">启动</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Nexus</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">容器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nexus3</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--restart=always</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8081:8081</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--mount</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src=nexus-data,target=/nexus-data</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sonatype/nexus3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>说明：</strong></p><ul><li>端口 8081 用于 Web 界面访问</li><li>数据持久化存储在 nexus-data 卷中</li></ul></blockquote><h2 id="_2-初始配置" tabindex="-1"><a class="header-anchor" href="#_2-初始配置"><span>2. 初始配置</span></a></h2><h3 id="_2-1-访问管理界面" tabindex="-1"><a class="header-anchor" href="#_2-1-访问管理界面"><span>2.1 访问管理界面</span></a></h3><p>打开浏览器访问：<code>http://&lt;your-ip&gt;:8081</code></p><p><strong>默认凭据：</strong></p><ul><li>用户名：<code>admin</code></li><li>密码：<code>admin123</code></li></ul><h3 id="_2-2-创建-docker-仓库" tabindex="-1"><a class="header-anchor" href="#_2-2-创建-docker-仓库"><span>2.2 创建 Docker 仓库</span></a></h3><ol><li>登录后点击设置图标</li><li>选择 Repositories -&gt; Create repository</li><li>选择 docker (hosted) 类型</li><li>配置仓库信息：</li></ol><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">Name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-hosted</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">HTTP</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">8082</span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Docker</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">仓库端口</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">Enable</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">Docker</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">V1</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">API</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">取消勾选</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-配置-docker-客户端" tabindex="-1"><a class="header-anchor" href="#_3-配置-docker-客户端"><span>3. 配置 Docker 客户端</span></a></h2><h3 id="_3-1-配置-docker-信任" tabindex="-1"><a class="header-anchor" href="#_3-1-配置-docker-信任"><span>3.1 配置 Docker 信任</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">编辑</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">daemon.json</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/docker/daemon.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;insecure-registries&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;your-nexus-ip:8082&quot;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重启</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Docker</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">restart</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-推送镜像示例" tabindex="-1"><a class="header-anchor" href="#_3-2-推送镜像示例"><span>3.2 推送镜像示例</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">登录到</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Nexus</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Docker</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">仓库</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">login</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your-nexus-ip:8082</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">标记镜像</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tag</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nginx:latest</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your-nexus-ip:8082/nginx:latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">推送镜像</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">push</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your-nexus-ip:8082/nginx:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-维护管理" tabindex="-1"><a class="header-anchor" href="#_4-维护管理"><span>4. 维护管理</span></a></h2><h3 id="_4-1-备份" tabindex="-1"><a class="header-anchor" href="#_4-1-备份"><span>4.1 备份</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">备份数据目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-zcvf</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nexus-data.tar.gz</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/var/lib/docker/volumes/nexus-data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-清理" tabindex="-1"><a class="header-anchor" href="#_4-2-清理"><span>4.2 清理</span></a></h3><ul><li>通过 Web 界面定期清理未使用的组件</li><li>配置自动清理策略</li><li>监控存储空间使用情况</li></ul><h2 id="_5-最佳实践" tabindex="-1"><a class="header-anchor" href="#_5-最佳实践"><span>5. 最佳实践</span></a></h2><ul><li>使用 HTTPS 加密传输</li><li>配置访问控制和权限管理</li><li>定期备份数据</li><li>监控系统资源使用情况</li><li>配置邮件通知</li></ul><blockquote><p><strong>注意：</strong> 生产环境建议使用 HTTPS，并配置适当的访问控制</p></blockquote>`,33))])}const g=p(c,[["render",o],["__file","index.html.vue"]]),D=JSON.parse('{"path":"/linux/hjfpw9op/","title":"11. Nexus3.x的私有仓库","lang":"zh-CN","frontmatter":{"createTime":"2025/02/17 16:59:04","permalink":"/linux/hjfpw9op/","title":"11. Nexus3.x的私有仓库","description":"简介 Nexus 是一个强大的仓库管理器，可以用来管理多种类型的仓库，包括： Docker 镜像仓库 Maven 包仓库 npm 包仓库 PyPI 包仓库 Yum/APT 软件源 相比官方的 Docker Registry，Nexus 具有以下优势： 支持自动垃圾回收 提供友好的 Web 界面 支持多种认证方式 可以管理多种类型的仓库 1. 安装部署 ...","head":[["meta",{"property":"og:url","content":"https://notes.moniter.top/linux/hjfpw9op/"}],["meta",{"property":"og:site_name","content":"Richie Lin"}],["meta",{"property":"og:title","content":"11. Nexus3.x的私有仓库"}],["meta",{"property":"og:description","content":"简介 Nexus 是一个强大的仓库管理器，可以用来管理多种类型的仓库，包括： Docker 镜像仓库 Maven 包仓库 npm 包仓库 PyPI 包仓库 Yum/APT 软件源 相比官方的 Docker Registry，Nexus 具有以下优势： 支持自动垃圾回收 提供友好的 Web 界面 支持多种认证方式 可以管理多种类型的仓库 1. 安装部署 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"11. Nexus3.x的私有仓库\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[],"git":{},"autoDesc":true,"filePathRelative":"notes/linux/Kubernetes/Docker系列学习/Docker系列学习-11.Nexu3.x的私有仓库.md"}');export{g as comp,D as data};
