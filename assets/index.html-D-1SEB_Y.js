import{_ as p,c as t,a as i,b as h,d as n,w as l,r as k,o as r,e}from"./app-BVpc6fz1.js";const d={},c={class:"table-of-contents"};function o(A,s){const a=k("router-link");return r(),t("div",null,[i("nav",c,[i("ul",null,[i("li",null,[n(a,{to:"#inventory-配置"},{default:l(()=>s[0]||(s[0]=[e("Inventory 配置")])),_:1}),i("ul",null,[i("li",null,[n(a,{to:"#创建-inventory-文件"},{default:l(()=>s[1]||(s[1]=[e("创建 Inventory 文件")])),_:1})]),i("li",null,[n(a,{to:"#基本命令"},{default:l(()=>s[2]||(s[2]=[e("基本命令")])),_:1})])])]),i("li",null,[n(a,{to:"#ssh-配置"},{default:l(()=>s[3]||(s[3]=[e("SSH 配置")])),_:1}),i("ul",null,[i("li",null,[n(a,{to:"#禁用-known-hosts-检查"},{default:l(()=>s[4]||(s[4]=[e("禁用 known_hosts 检查")])),_:1})])])]),i("li",null,[n(a,{to:"#主机组定义"},{default:l(()=>s[5]||(s[5]=[e("主机组定义")])),_:1}),i("ul",null,[i("li",null,[n(a,{to:"#主机变量"},{default:l(()=>s[6]||(s[6]=[e("主机变量")])),_:1})]),i("li",null,[n(a,{to:"#主机模式"},{default:l(()=>s[7]||(s[7]=[e("主机模式")])),_:1})])])]),i("li",null,[n(a,{to:"#最佳实践"},{default:l(()=>s[8]||(s[8]=[e("最佳实践")])),_:1})])])]),s[9]||(s[9]=h(`<hr><h2 id="inventory-配置" tabindex="-1"><a class="header-anchor" href="#inventory-配置"><span>Inventory 配置</span></a></h2><h3 id="创建-inventory-文件" tabindex="-1"><a class="header-anchor" href="#创建-inventory-文件"><span>创建 Inventory 文件</span></a></h3><p>Inventory 文件用于定义 Ansible 要管理的主机列表。默认路径为 <code>/etc/ansible/hosts</code>。</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">创建基本</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">inventory</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/ansible/hosts</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOL</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">192.168.50.66</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">192.168.50.110</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">192.168.50.111</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">192.168.50.112</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基本命令" tabindex="-1"><a class="header-anchor" href="#基本命令"><span>基本命令</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">测试连通性</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ansible</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">all</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-m</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ping</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">执行命令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ansible</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">all</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-a</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/echo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hello</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">单行显示结果</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ansible</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">servers</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-m</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ping</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-o</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">执行</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">shell</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">命令</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ansible</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">servers</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-m</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">shell</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-a</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">uptime</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ssh-配置" tabindex="-1"><a class="header-anchor" href="#ssh-配置"><span>SSH 配置</span></a></h2><h3 id="禁用-known-hosts-检查" tabindex="-1"><a class="header-anchor" href="#禁用-known-hosts-检查"><span>禁用 known_hosts 检查</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">方法一：配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">~/.ansible.cfg</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[defaults]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">host_key_checking</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">False</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">方法二：环境变量</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ANSIBLE_HOST_KEY_CHECKING</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">False</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Inventory</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">文件格式</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="主机组定义" tabindex="-1"><a class="header-anchor" href="#主机组定义"><span>主机组定义</span></a></h2><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">基本格式</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nameserver</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.50.66</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.50.110</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dbserver</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.50.111</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.50.112</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="主机变量" tabindex="-1"><a class="header-anchor" href="#主机变量"><span>主机变量</span></a></h3><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">指定连接参数</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">jumper</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ansible_ssh_port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">5555</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ansible_ssh_host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.50.66</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">指定连接类型和用户</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">targets</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">localhost</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ansible_connection</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">local</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">other1.example.com</span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ansible_connection</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ssh</span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ansible_ssh_user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="主机模式" tabindex="-1"><a class="header-anchor" href="#主机模式"><span>主机模式</span></a></h3><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">使用范围表达式</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">webserver</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">www[01:50].example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">使用字母范围</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dbserver</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">db-[a:f].example.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>配置建议</strong></p><ul><li>使用组织良好的目录结构</li><li>合理使用主机组</li><li>善用变量文件</li></ul></li><li><p><strong>安全建议</strong></p><ul><li>使用密钥认证</li><li>限制主机访问</li><li>定期更新配置</li></ul></li></ol><blockquote><p><strong>注意：</strong></p><ul><li>注意文件权限设置</li><li>避免明文存储密码</li><li>及时更新 inventory</li></ul></blockquote><hr><blockquote><p><strong>参考资料：</strong></p><ul><li><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html" target="_blank" rel="noopener noreferrer">Ansible Inventory 指南</a></li><li><a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html" target="_blank" rel="noopener noreferrer">Ansible 最佳实践</a></li></ul></blockquote>`,21))])}const v=p(d,[["render",o],["__file","index.html.vue"]]),y=JSON.parse('{"path":"/linux/g8aff21h/","title":"Ansible: 基本操作","lang":"zh-CN","frontmatter":{"createTime":"2025/02/17 16:59:04","permalink":"/linux/g8aff21h/","title":"Ansible: 基本操作","description":"Inventory 配置 创建 Inventory 文件 Inventory 文件用于定义 Ansible 要管理的主机列表。默认路径为 /etc/ansible/hosts。 基本命令 SSH 配置 禁用 known_hosts 检查 主机组定义 主机变量 主机模式 最佳实践 配置建议 使用组织良好的目录结构 合理使用主机组 善用变量文件 安全建议 ...","head":[["meta",{"property":"og:url","content":"https://notes.moniter.top/linux/g8aff21h/"}],["meta",{"property":"og:site_name","content":"Richie Lin"}],["meta",{"property":"og:title","content":"Ansible: 基本操作"}],["meta",{"property":"og:description","content":"Inventory 配置 创建 Inventory 文件 Inventory 文件用于定义 Ansible 要管理的主机列表。默认路径为 /etc/ansible/hosts。 基本命令 SSH 配置 禁用 known_hosts 检查 主机组定义 主机变量 主机模式 最佳实践 配置建议 使用组织良好的目录结构 合理使用主机组 善用变量文件 安全建议 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ansible: 基本操作\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[],"git":{},"autoDesc":true,"filePathRelative":"notes/linux/Ansible/Ansible:基本操作.md"}');export{v as comp,y as data};
