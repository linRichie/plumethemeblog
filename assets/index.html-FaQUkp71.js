import{_ as p,c as t,a,b as r,d as n,w as l,r as h,o as c,e}from"./app-BVpc6fz1.js";const k={},d={class:"table-of-contents"};function A(o,s){const i=h("router-link");return c(),t("div",null,[a("nav",d,[a("ul",null,[a("li",null,[n(i,{to:"#简介"},{default:l(()=>s[0]||(s[0]=[e("简介")])),_:1})]),a("li",null,[n(i,{to:"#access-模式"},{default:l(()=>s[1]||(s[1]=[e("Access 模式")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#access接口"},{default:l(()=>s[2]||(s[2]=[e("Access接口")])),_:1})]),a("li",null,[n(i,{to:"#access-特点"},{default:l(()=>s[3]||(s[3]=[e("Access 特点")])),_:1})])])]),a("li",null,[n(i,{to:"#trunk接口"},{default:l(()=>s[4]||(s[4]=[e("Trunk接口")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#配置示例"},{default:l(()=>s[5]||(s[5]=[e("配置示例")])),_:1})]),a("li",null,[n(i,{to:"#trunk-特点"},{default:l(()=>s[6]||(s[6]=[e("Trunk 特点")])),_:1})])])]),a("li",null,[n(i,{to:"#最佳实践"},{default:l(()=>s[7]||(s[7]=[e("最佳实践")])),_:1})])])]),s[8]||(s[8]=r(`<hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>交换机端口模式决定了端口如何处理 VLAN 标签(tag)，主要有三种模式：</p><ul><li>Access：只能属于1个VLAN，一般用于连接计算机端口</li><li>Trunk：允许多个VLAN，可以接受和发送多个VLAN报文，一般用于交换机与交换机相关的接口</li><li>Hybrid：可以允许多个VLAN，可以接受和发送多个VLAN报文，一般用于交换机的间接连接也可以用于连接用户计算机</li></ul><h2 id="access-模式" tabindex="-1"><a class="header-anchor" href="#access-模式"><span>Access 模式</span></a></h2><h3 id="access接口" tabindex="-1"><a class="header-anchor" href="#access接口"><span>Access接口</span></a></h3><p>Access 端口主要用于连接终端设备（如计算机），因为终端设备通常不能识别 VLAN 标签。</p><p>一般用于连接终端用户，PC并不能识别带有tag的数据帧<br> 配置：</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">进入端口配置模式</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">interface</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">G0/0/1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">设置端口类型为</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">access</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">port</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">link-type</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">access</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">指定所属</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">VLAN</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">port</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">default</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vlan</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="access-特点" tabindex="-1"><a class="header-anchor" href="#access-特点"><span>Access 特点</span></a></h3><ol><li><p><strong>数据帧处理</strong></p><ul><li>只允许与端口 PVID 相同的数据帧通过</li><li>收到无标签帧时，添加端口的 PVID</li><li>发送时去除 VLAN 标签</li></ul></li><li><p><strong>默认配置</strong></p><ul><li>默认端口类型为 access</li><li>默认 PVID 为 1</li><li>VLAN 1 为系统预留，不可删改</li></ul></li></ol><h2 id="trunk接口" tabindex="-1"><a class="header-anchor" href="#trunk接口"><span>Trunk接口</span></a></h2><p>Trunk 端口用于交换机之间的互联，可以传输多个 VLAN 的数据。它保留 VLAN 标签信息，使不同交换机之间能够识别数据帧所属的 VLAN。</p><blockquote><p><strong>注意：</strong> Trunk 端口不能直接实现不同 VLAN 间的通信，需要通过三层设备（路由器/三层交换机）</p></blockquote><h3 id="配置示例" tabindex="-1"><a class="header-anchor" href="#配置示例"><span>配置示例</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">进入端口配置模式</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">interface</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">G0/0/0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">设置为</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Trunk</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">模式</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">port</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">link-type</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">trunk</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">设置</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">PVID（处理无标签帧时使用）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">port</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">trunk</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">pvid</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vlan</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">允许指定</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">VLAN</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">通过</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">port</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">trunk</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">allow-pass</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vlan</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">5</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">允许所有</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">VLAN</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">通过</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">port</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">trunk</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">allow-pass</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vlan</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">all</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">查看</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">VLAN</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">display</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vlan</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="trunk-特点" tabindex="-1"><a class="header-anchor" href="#trunk-特点"><span>Trunk 特点</span></a></h3><ol><li><p><strong>接收处理</strong></p><ul><li>无标签帧：添加 PVID 标签</li><li>有标签帧：检查是否允许通过 <ul><li>允许：保持标签转发</li><li>不允许：丢弃</li></ul></li></ul></li><li><p><strong>发送处理</strong></p><ul><li>PVID 相同的帧：去除标签</li><li>PVID 不同的帧：保持标签</li></ul></li></ol><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>端口规划</strong></p><ul><li>Access 端口用于终端设备</li><li>Trunk 端口用于交换机互联</li><li>合理规划 VLAN 分配</li></ul></li><li><p><strong>安全建议</strong></p><ul><li>限制 Trunk 允许的 VLAN</li><li>避免使用 VLAN 1</li><li>定期检查端口配置</li></ul></li></ol><blockquote><p><strong>参考资料：</strong></p><ul><li><a href="https://baike.baidu.com/item/PVID/10536481" target="_blank" rel="noopener noreferrer">PVID 说明</a></li><li><a href="https://support.huawei.com/enterprise/zh/doc/EDOC1100055069" target="_blank" rel="noopener noreferrer">交换机端口模式配置指南</a></li></ul></blockquote>`,21))])}const D=p(k,[["render",A],["__file","index.html.vue"]]),g=JSON.parse('{"path":"/linux/7i8etk5j/","title":"交换机端口模式","lang":"zh-CN","frontmatter":{"createTime":"2025/02/17 16:59:04","permalink":"/linux/7i8etk5j/","title":"交换机端口模式","description":"简介 交换机端口模式决定了端口如何处理 VLAN 标签(tag)，主要有三种模式： Access：只能属于1个VLAN，一般用于连接计算机端口 Trunk：允许多个VLAN，可以接受和发送多个VLAN报文，一般用于交换机与交换机相关的接口 Hybrid：可以允许多个VLAN，可以接受和发送多个VLAN报文，一般用于交换机的间接连接也可以用于连接用户计算...","head":[["meta",{"property":"og:url","content":"https://notes.moniter.top/linux/7i8etk5j/"}],["meta",{"property":"og:site_name","content":"Richie Lin"}],["meta",{"property":"og:title","content":"交换机端口模式"}],["meta",{"property":"og:description","content":"简介 交换机端口模式决定了端口如何处理 VLAN 标签(tag)，主要有三种模式： Access：只能属于1个VLAN，一般用于连接计算机端口 Trunk：允许多个VLAN，可以接受和发送多个VLAN报文，一般用于交换机与交换机相关的接口 Hybrid：可以允许多个VLAN，可以接受和发送多个VLAN报文，一般用于交换机的间接连接也可以用于连接用户计算..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"交换机端口模式\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[],"git":{},"autoDesc":true,"filePathRelative":"notes/linux/Network/交换机端口模式.md"}');export{D as comp,g as data};
