import{_ as l,c as p,a,b as d,d as t,w as n,r as h,o as r,e}from"./app-BVpc6fz1.js";const k={},c={class:"table-of-contents"};function o(u,s){const i=h("router-link");return r(),p("div",null,[a("nav",c,[a("ul",null,[a("li",null,[t(i,{to:"#简介"},{default:n(()=>s[0]||(s[0]=[e("简介")])),_:1})]),a("li",null,[t(i,{to:"#安装"},{default:n(()=>s[1]||(s[1]=[e("安装")])),_:1}),a("ul",null,[a("li",null,[t(i,{to:"#centos-rhel"},{default:n(()=>s[2]||(s[2]=[e("CentOS/RHEL")])),_:1})]),a("li",null,[t(i,{to:"#ubuntu-debian"},{default:n(()=>s[3]||(s[3]=[e("Ubuntu/Debian")])),_:1})])])]),a("li",null,[t(i,{to:"#使用方法"},{default:n(()=>s[4]||(s[4]=[e("使用方法")])),_:1}),a("ul",null,[a("li",null,[t(i,{to:"#基本语法"},{default:n(()=>s[5]||(s[5]=[e("基本语法")])),_:1})]),a("li",null,[t(i,{to:"#常用参数"},{default:n(()=>s[6]||(s[6]=[e("常用参数")])),_:1})]),a("li",null,[t(i,{to:"#输出示例"},{default:n(()=>s[7]||(s[7]=[e("输出示例")])),_:1})])])]),a("li",null,[t(i,{to:"#实用脚本"},{default:n(()=>s[8]||(s[8]=[e("实用脚本")])),_:1}),a("ul",null,[a("li",null,[t(i,{to:"#监控网络状态并发送报告"},{default:n(()=>s[9]||(s[9]=[e("监控网络状态并发送报告")])),_:1})]),a("li",null,[t(i,{to:"#定时任务配置"},{default:n(()=>s[10]||(s[10]=[e("定时任务配置")])),_:1})])])]),a("li",null,[t(i,{to:"#最佳实践"},{default:n(()=>s[11]||(s[11]=[e("最佳实践")])),_:1})])])]),s[12]||(s[12]=d(`<hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>该命令整合了vmstat，iostat和ifstat三种命令。同时增加了新的特性和功能可以让你能及时看到各种的资源使用情况，从而能够使你对比和整合不同的资源使用情况。通过不同颜色和区块布局的界面帮助你能够更加清晰容易的获取信息。它也支持将信息数据导出到cvs格式文件中，从而用其他应用程序打开，或者导入到数据库中。</p><p>dstat 是一个功能强大的系统资源统计工具，具有以下特点：</p><ul><li>整合了 vmstat、iostat、ifstat 等多个工具的功能</li><li>实时显示系统资源使用状况</li><li>支持彩色输出和模块化显示</li><li>可导出 CSV 格式数据用于后续分析</li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><h3 id="centos-rhel" tabindex="-1"><a class="header-anchor" href="#centos-rhel"><span>CentOS/RHEL</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-y</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">install</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dstat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ubuntu-debian" tabindex="-1"><a class="header-anchor" href="#ubuntu-debian"><span>Ubuntu/Debian</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apt-get</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">install</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dstat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用方法" tabindex="-1"><a class="header-anchor" href="#使用方法"><span>使用方法</span></a></h2><h3 id="基本语法" tabindex="-1"><a class="header-anchor" href="#基本语法"><span>基本语法</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dstat</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[options]</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">delay</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="常用参数" tabindex="-1"><a class="header-anchor" href="#常用参数"><span>常用参数</span></a></h3><table><thead><tr><th>参数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>-c</td><td>CPU 状态</td><td>dstat -c</td></tr><tr><td>-m</td><td>内存状态</td><td>dstat -m</td></tr><tr><td>-n</td><td>网络状态</td><td>dstat -n</td></tr><tr><td>-d</td><td>磁盘 I/O</td><td>dstat -d</td></tr><tr><td>-r</td><td>I/O 请求</td><td>dstat -r</td></tr><tr><td>-s</td><td>交换分区</td><td>dstat -s</td></tr><tr><td>-t</td><td>显示时间</td><td>dstat -t</td></tr><tr><td>--top-cpu</td><td>CPU 使用率最高的进程</td><td>dstat --top-cpu</td></tr><tr><td>--top-mem</td><td>内存使用最多的进程</td><td>dstat --top-mem</td></tr></tbody></table><h3 id="输出示例" tabindex="-1"><a class="header-anchor" href="#输出示例"><span>输出示例</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">监控</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">CPU</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">和内存状态，每</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">2</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">秒更新一次，共</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">5</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">次</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dstat</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-cm</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">监控网络和磁盘</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">I/O</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dstat</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-dn</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">导出到</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">CSV</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dstat</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--output</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">report.csv</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-cdn</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实用脚本" tabindex="-1"><a class="header-anchor" href="#实用脚本"><span>实用脚本</span></a></h2><h3 id="监控网络状态并发送报告" tabindex="-1"><a class="header-anchor" href="#监控网络状态并发送报告"><span>监控网络状态并发送报告</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">time</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\`</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">date</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+%Y-%m-%d</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\`</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$time</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">收集网络状态数据</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dstat</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-tcf</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--output</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/eths_</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.csv</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">40</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">发送邮件报告</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$time网路状态</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mail</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-a</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/eths_</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.csv</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$time网络状态</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xxxx@qq.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="定时任务配置" tabindex="-1"><a class="header-anchor" href="#定时任务配置"><span>定时任务配置</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">crontab</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/src/dstat_consol.sh</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/dev/null</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">2&gt;&amp;1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>监控建议</strong></p><ul><li>根据需求选择合适的监控指标</li><li>设置合理的采样间隔</li><li>避免过多的输出项影响可读性</li></ul></li><li><p><strong>数据处理</strong></p><ul><li>定期导出数据进行分析</li><li>设置自动清理机制</li><li>建立监控告警阈值</li></ul></li></ol><blockquote><p><strong>注意：</strong></p><ul><li>时间参数要放在输出参数后面</li><li>合理使用 CSV 输出功能</li><li>注意数据存储空间</li></ul><p><strong>参考资料：</strong></p><ul><li><a href="https://github.com/dagwieers/dstat" target="_blank" rel="noopener noreferrer">dstat 官方文档</a></li><li><a href="https://www.kernel.org/doc/Documentation/accounting/taskstats.txt" target="_blank" rel="noopener noreferrer">Linux 性能监控工具</a></li></ul></blockquote>`,25))])}const g=l(k,[["render",o],["__file","index.html.vue"]]),y=JSON.parse('{"path":"/linux/ny3lpzgi/","title":"多类型资源统计工具: dstat","lang":"zh-CN","frontmatter":{"createTime":"2025/02/17 16:59:04","permalink":"/linux/ny3lpzgi/","title":"多类型资源统计工具: dstat","description":"简介 该命令整合了vmstat，iostat和ifstat三种命令。同时增加了新的特性和功能可以让你能及时看到各种的资源使用情况，从而能够使你对比和整合不同的资源使用情况。通过不同颜色和区块布局的界面帮助你能够更加清晰容易的获取信息。它也支持将信息数据导出到cvs格式文件中，从而用其他应用程序打开，或者导入到数据库中。 dstat 是一个功能强大的系统...","head":[["meta",{"property":"og:url","content":"https://notes.moniter.top/linux/ny3lpzgi/"}],["meta",{"property":"og:site_name","content":"Richie Lin"}],["meta",{"property":"og:title","content":"多类型资源统计工具: dstat"}],["meta",{"property":"og:description","content":"简介 该命令整合了vmstat，iostat和ifstat三种命令。同时增加了新的特性和功能可以让你能及时看到各种的资源使用情况，从而能够使你对比和整合不同的资源使用情况。通过不同颜色和区块布局的界面帮助你能够更加清晰容易的获取信息。它也支持将信息数据导出到cvs格式文件中，从而用其他应用程序打开，或者导入到数据库中。 dstat 是一个功能强大的系统..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"多类型资源统计工具: dstat\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[],"git":{},"autoDesc":true,"filePathRelative":"notes/linux/Commands/dstat.md"}');export{g as comp,y as data};
