import{_ as t,c as p,a as i,b as d,d as n,w as e,r as h,o as r,e as l}from"./app-BVpc6fz1.js";const k={},c={class:"table-of-contents"};function o(u,s){const a=h("router-link");return r(),p("div",null,[i("nav",c,[i("ul",null,[i("li",null,[n(a,{to:"#systemd-服务管理"},{default:e(()=>s[0]||(s[0]=[l("Systemd 服务管理")])),_:1}),i("ul",null,[i("li",null,[n(a,{to:"#服务单元介绍"},{default:e(()=>s[1]||(s[1]=[l("服务单元介绍")])),_:1})]),i("li",null,[n(a,{to:"#服务状态查看"},{default:e(()=>s[2]||(s[2]=[l("服务状态查看")])),_:1})]),i("li",null,[n(a,{to:"#服务状态说明"},{default:e(()=>s[3]||(s[3]=[l("服务状态说明")])),_:1})]),i("li",null,[n(a,{to:"#服务管理命令"},{default:e(()=>s[4]||(s[4]=[l("服务管理命令")])),_:1})]),i("li",null,[n(a,{to:"#系统管理"},{default:e(()=>s[5]||(s[5]=[l("系统管理")])),_:1})])])]),i("li",null,[n(a,{to:"#服务配置文件"},{default:e(()=>s[6]||(s[6]=[l("服务配置文件")])),_:1}),i("ul",null,[i("li",null,[n(a,{to:"#配置文件位置"},{default:e(()=>s[7]||(s[7]=[l("配置文件位置")])),_:1})]),i("li",null,[n(a,{to:"#配置文件示例"},{default:e(()=>s[8]||(s[8]=[l("配置文件示例")])),_:1})])])]),i("li",null,[n(a,{to:"#最佳实践"},{default:e(()=>s[9]||(s[9]=[l("最佳实践")])),_:1})])])]),s[10]||(s[10]=d(`<hr><h2 id="systemd-服务管理" tabindex="-1"><a class="header-anchor" href="#systemd-服务管理"><span>Systemd 服务管理</span></a></h2><h3 id="服务单元介绍" tabindex="-1"><a class="header-anchor" href="#服务单元介绍"><span>服务单元介绍</span></a></h3><p>Systemd 中的服务单元(Unit)是系统服务的基本单位：</p><ul><li>以 <code>.service</code> 结尾的文件表示一个服务</li><li>支持开机自启动配置</li><li>可以管理传统的 init 服务</li></ul><h3 id="服务状态查看" tabindex="-1"><a class="header-anchor" href="#服务状态查看"><span>服务状态查看</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">列出所有服务单元</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">list-unit-files</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--type=service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">查看服务详细信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">status</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">查看服务配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cat</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务状态说明" tabindex="-1"><a class="header-anchor" href="#服务状态说明"><span>服务状态说明</span></a></h3><table><thead><tr><th>STATE</th><th>说明</th></tr></thead><tbody><tr><td>disabled</td><td>开机不启动</td></tr><tr><td>enabled</td><td>开机自启动</td></tr><tr><td>static</td><td>对应的Unit文件没有定义[Install]区域，所以无法设置为开机启动</td></tr><tr><td>masked</td><td>服务被禁止启动</td></tr></tbody></table><h3 id="服务管理命令" tabindex="-1"><a class="header-anchor" href="#服务管理命令"><span>服务管理命令</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">启动服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">start</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">停止服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">stop</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重启服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">restart</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重新加载配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">reload</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">设置开机自启</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">enable</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">禁用开机自启</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">disable</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">service_name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="系统管理" tabindex="-1"><a class="header-anchor" href="#系统管理"><span>系统管理</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">查看启动失败的服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--failed</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重新加载所有服务文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">daemon-relaod</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务配置文件" tabindex="-1"><a class="header-anchor" href="#服务配置文件"><span>服务配置文件</span></a></h2><h3 id="配置文件位置" tabindex="-1"><a class="header-anchor" href="#配置文件位置"><span>配置文件位置</span></a></h3><ul><li><code>/etc/systemd/system/</code> - 系统服务配置文件</li><li><code>/usr/lib/systemd/system/</code> - 软件包安装的服务文件</li></ul><h3 id="配置文件示例" tabindex="-1"><a class="header-anchor" href="#配置文件示例"><span>配置文件示例</span></a></h3><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Unit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Description</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">My</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Service</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">After</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">network.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Service</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">simple</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ExecStart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/usr/bin/myservice</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">Restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">always</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Install</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WantedBy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">multi-user.target</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><ol><li><p><strong>服务管理</strong></p><ul><li>使用 systemctl 管理服务</li><li>定期检查服务状态</li><li>及时处理失败服务</li></ul></li><li><p><strong>配置建议</strong></p><ul><li>遵循最小权限原则</li><li>合理设置依赖关系</li><li>添加适当的服务描述</li></ul></li></ol><blockquote><p><strong>注意：</strong></p><ul><li>修改配置后需要重新加载</li><li>注意服务间的依赖关系</li><li>重要服务建议设置自动重启</li></ul></blockquote>`,21))])}const v=t(k,[["render",o],["__file","index.html.vue"]]),A=JSON.parse('{"path":"/linux/xu5u0brd/","title":"系统服务配置","lang":"zh-CN","frontmatter":{"createTime":"2025/02/17 16:59:04","permalink":"/linux/xu5u0brd/","title":"系统服务配置","description":"Systemd 服务管理 服务单元介绍 Systemd 中的服务单元(Unit)是系统服务的基本单位： 以 .service 结尾的文件表示一个服务 支持开机自启动配置 可以管理传统的 init 服务 服务状态查看 服务状态说明 服务管理命令 系统管理 服务配置文件 配置文件位置 /etc/systemd/system/ - 系统服务配置文件 /usr...","head":[["meta",{"property":"og:url","content":"https://notes.moniter.top/linux/xu5u0brd/"}],["meta",{"property":"og:site_name","content":"Richie Lin"}],["meta",{"property":"og:title","content":"系统服务配置"}],["meta",{"property":"og:description","content":"Systemd 服务管理 服务单元介绍 Systemd 中的服务单元(Unit)是系统服务的基本单位： 以 .service 结尾的文件表示一个服务 支持开机自启动配置 可以管理传统的 init 服务 服务状态查看 服务状态说明 服务管理命令 系统管理 服务配置文件 配置文件位置 /etc/systemd/system/ - 系统服务配置文件 /usr..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"系统服务配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[],"git":{},"autoDesc":true,"filePathRelative":"notes/linux/Systemd/1.系统服务配置.md"}');export{v as comp,A as data};
