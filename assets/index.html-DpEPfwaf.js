import{_ as t,c as p,a,b as d,d as n,w as e,r,o as c,e as l}from"./app-BVpc6fz1.js";const h={},k={class:"table-of-contents"};function o(u,s){const i=r("router-link");return c(),p("div",null,[a("nav",k,[a("ul",null,[a("li",null,[n(i,{to:"#简介"},{default:e(()=>s[0]||(s[0]=[l("简介")])),_:1})]),a("li",null,[n(i,{to:"#_1-配置文件位置"},{default:e(()=>s[1]||(s[1]=[l("1. 配置文件位置")])),_:1})]),a("li",null,[n(i,{to:"#_2-常用配置项"},{default:e(()=>s[2]||(s[2]=[l("2. 常用配置项")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#_2-1-存储配置"},{default:e(()=>s[3]||(s[3]=[l("2.1 存储配置")])),_:1})]),a("li",null,[n(i,{to:"#_2-2-镜像源配置"},{default:e(()=>s[4]||(s[4]=[l("2.2 镜像源配置")])),_:1})]),a("li",null,[n(i,{to:"#_2-3-安全配置"},{default:e(()=>s[5]||(s[5]=[l("2.3 安全配置")])),_:1})])])]),a("li",null,[n(i,{to:"#_3-systemd-服务配置"},{default:e(()=>s[6]||(s[6]=[l("3. systemd 服务配置")])),_:1}),a("ul",null,[a("li",null,[n(i,{to:"#_3-1-修改服务文件"},{default:e(()=>s[7]||(s[7]=[l("3.1 修改服务文件")])),_:1})]),a("li",null,[n(i,{to:"#_3-2-参数说明"},{default:e(()=>s[8]||(s[8]=[l("3.2 参数说明")])),_:1})]),a("li",null,[n(i,{to:"#_3-3-重启服务"},{default:e(()=>s[9]||(s[9]=[l("3.3 重启服务")])),_:1})])])]),a("li",null,[n(i,{to:"#_4-最佳实践"},{default:e(()=>s[10]||(s[10]=[l("4. 最佳实践")])),_:1})])])]),s[11]||(s[11]=d(`<hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Docker 守护进程(Docker daemon)的配置可以通过多种方式修改，本文主要介绍通过 systemd 服务配置文件来修改 Docker 的启动参数。</p><h2 id="_1-配置文件位置" tabindex="-1"><a class="header-anchor" href="#_1-配置文件位置"><span>1. 配置文件位置</span></a></h2><ul><li>主配置文件：<code>/etc/docker/daemon.json</code></li><li>systemd 服务文件：<code>/lib/systemd/system/docker.service</code></li></ul><h2 id="_2-常用配置项" tabindex="-1"><a class="header-anchor" href="#_2-常用配置项"><span>2. 常用配置项</span></a></h2><h3 id="_2-1-存储配置" tabindex="-1"><a class="header-anchor" href="#_2-1-存储配置"><span>2.1 存储配置</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">data-root</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/path/to/your/docker</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>说明：</strong> 修改 Docker 根目录位置，默认为 <code>/var/lib/docker</code></p></blockquote><h3 id="_2-2-镜像源配置" tabindex="-1"><a class="header-anchor" href="#_2-2-镜像源配置"><span>2.2 镜像源配置</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">registry-mirrors</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://mirror.ccs.tencentyun.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://registry.docker-cn.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-安全配置" tabindex="-1"><a class="header-anchor" href="#_2-3-安全配置"><span>2.3 安全配置</span></a></h3><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">insecure-registries</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">192.168.1.100:5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-systemd-服务配置" tabindex="-1"><a class="header-anchor" href="#_3-systemd-服务配置"><span>3. systemd 服务配置</span></a></h2><h3 id="_3-1-修改服务文件" tabindex="-1"><a class="header-anchor" href="#_3-1-修改服务文件"><span>3.1 修改服务文件</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">编辑服务配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/lib/systemd/system/docker.service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">在</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">ExecStart</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">行添加参数</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ExecStart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/bin/dockerd</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">\\</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--insecure-registry</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.example.com</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--data-root</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/path/to/docker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--registry-mirror</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://mirror.example.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-参数说明" tabindex="-1"><a class="header-anchor" href="#_3-2-参数说明"><span>3.2 参数说明</span></a></h3><ul><li><code>--data-root</code>: 指定 Docker 根目录</li><li><code>--insecure-registry</code>: 允许使用不安全的私有仓库</li><li><code>--registry-mirror</code>: 配置镜像加速器</li></ul><h3 id="_3-3-重启服务" tabindex="-1"><a class="header-anchor" href="#_3-3-重启服务"><span>3.3 重启服务</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重新加载配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">daemon-reload</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重启</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Docker</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">restart</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">查看服务状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">status</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-最佳实践" tabindex="-1"><a class="header-anchor" href="#_4-最佳实践"><span>4. 最佳实践</span></a></h2><ul><li>优先使用 <code>daemon.json</code> 进行配置</li><li>使用 systemd 管理 Docker 服务</li><li>定期备份配置文件</li><li>修改配置后进行测试验证</li></ul><blockquote><p><strong>注意：</strong> 修改配置后必须重启 Docker 服务才能生效</p></blockquote>`,23))])}const m=t(h,[["render",o],["__file","index.html.vue"]]),g=JSON.parse('{"path":"/linux/o7snlzie/","title":"10. 修改docker的启动项","lang":"zh-CN","frontmatter":{"createTime":"2025/02/17 16:59:04","permalink":"/linux/o7snlzie/","title":"10. 修改docker的启动项","description":"简介 Docker 守护进程(Docker daemon)的配置可以通过多种方式修改，本文主要介绍通过 systemd 服务配置文件来修改 Docker 的启动参数。 1. 配置文件位置 主配置文件：/etc/docker/daemon.json systemd 服务文件：/lib/systemd/system/docker.service 2. 常用...","head":[["meta",{"property":"og:url","content":"https://notes.moniter.top/linux/o7snlzie/"}],["meta",{"property":"og:site_name","content":"Richie Lin"}],["meta",{"property":"og:title","content":"10. 修改docker的启动项"}],["meta",{"property":"og:description","content":"简介 Docker 守护进程(Docker daemon)的配置可以通过多种方式修改，本文主要介绍通过 systemd 服务配置文件来修改 Docker 的启动参数。 1. 配置文件位置 主配置文件：/etc/docker/daemon.json systemd 服务文件：/lib/systemd/system/docker.service 2. 常用..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"10. 修改docker的启动项\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[],"git":{},"autoDesc":true,"filePathRelative":"notes/linux/Kubernetes/Docker系列学习/Docker系列学习-10.修改Docker启动项.md"}');export{m as comp,g as data};
